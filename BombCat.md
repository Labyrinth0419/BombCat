# BombCat Project

## 1.介绍
炸弹猫是一款常见的桌游。以抽到炸弹且无法拆解作为失败条件。

## 2.基本逻辑

### 2.1.基本框架
* 在炸弹猫中，我们创建两个类，一个为`Card`类，负责记录所有的牌型；另一个为`Player`类，负责代表玩家的状态和手牌情况。
* 对于游戏进行，创建另一个类，为`Game`类，包含了玩家和当前牌堆情况。
* 目前为文档编写阶段，不进行编程工作。ui开发暂定为使用Qt.

### 2.2.`Card`类的要求
在`Card`类中，需要包含以下成员：
* `std::string`类型的`name`
* `std::string`类型的描述
* `int`类型的`id`

等。

需要包含以下函数：
* `void function()`实现卡牌功能。其中参数自定。

等。

注意父子类和纯虚函数的使用。

### 2.3.`Player`类的要求

在`Player`类中，需要包含以下成员：
* `std::vector<Card>`类型的`hand`，用于记录玩家当前手牌
* `int`类型的`id`，用于记录玩家的唯一编号。从`0`开始。
* `bool`类型的`isVisible`，用于记录玩家是否可见自己的手牌，用于特殊牌`诅咒`。默认为`true`。

等。

### 2.4.`Game`类的要求
在`Game`类中，需要包含以下成员：
* `std::vector<Player>`类型的`players`
* `std::vector<Card>`类型的`deck`，用于记录牌堆状况
* `bool`类型的`direction`，用于记录目前的顺序。以`true`为逆时针，默认为`true`。

等。

**注意：** 共有和私有由负责人员自行决定。

## 3.目前任务（2024/6/24 - 2024/6/30）

1. 完成文档的内容补充。

2. 完成卡牌的功能描述。目前需要完成的卡牌有： **（已完成）**
    * 拆除
    * 炸弹
    * **涉及玩家的牌**：交换、帮助、预见未来（$\times 3、\times 5$）、改变未来（观星）、切洗、下翻。
    * **涉及轮次**：跳过、反转、攻击。
  
 

3. 下阶段要完成：
   * 指向攻击
   * 超级跳跃（跳过所有叠加回合）
   * 野猫
    
    请注意代码的可复用性。

## 4.代码规范

### 4.1.命名规范
- 所有命名使用英文单词（不要使用拼音）或其缩写，以及一些常用的简写变量。

#### 举例：
- 类名：每个单词的首字母大写
- 变量和函数名：使用驼峰格式
- 除非特殊情况，否则头文件开头使用 `#pragma once`

### 4.2.示例代码
#### 一些具体的注意点
- 大括号位置：`if`、`else`、`for`、`while` 等在同一行末尾；函数定义末尾的大括号在下一行。
- 缩进：每一级4个空格缩进。
- 每个两元运算符（即 `X op Y` 形式中的 `op`）左右各有空格，比如 `+`, `>=`, `=` 等。
- 所有不会被修改的参数需要按照const引用的方式传递（`int`, `double` 等基本类型可以直接传递，不需要使用const引用）。

#### 例如下示例中，`DIYClass` 的用法
```cpp
int Student::getScore(int classId, const vector<Class> &allClasses) const {
    if (classId < 0 || classId >= numClasses) {
        // 无效的课程 ID
        return 0;
    } else {
        vector<Class>::Iterator cl;
        // 遍历所有课程，找到特定class id的课程分数
        for (cl = allClasses.begin(); cl != allClasses.end(); ++cl) {
            if (cl->id == classId) {
                return cl->getScore(this);
            }
        }
        // 未找回该 class
        return -1;
    }
}
```

### 4.3.函数头格式
- 函数注释要能表示函数具体行为，要能涵盖每个参数的含义和作用，解释返回值的含义。

#### 例如：
```cpp
// getScore 接受课程号(classId)作为参数，返回对应课程的分数
// 未找到时返回-1
int Student::getScore(int classId, const vector<Class> &allClasses) const {
    // ...
}
```

### 4.4.函数长度要求
- 原则上每个函数不超过50行。

## 5.卡牌描述
### 基本版56张牌：
- **爆炸猫 ExplodingKitten 4张**
> 抽到时立即展示，如打出拆解牌则将爆炸猫秘密放回牌堆任意位置，若不能打出拆解牌则出局。
- **拆解 Defuse 6张**
> 抽到爆炸猫时使用，将爆炸猫秘密放回牌堆任意位置。
- **先知 SeeTheFuture 5张**
> 查看牌堆顶的3张牌后放回，不能改变它们的位置。
- **否决 Nope 5张**
> 取消除“爆炸猫”、“拆解”外的任何一张牌的效果。此牌可以在回合外使用。
- **进攻 Attack 4张**
> 你的行动结束不抽牌，下家行动需连续进行两个回合。
- **跳过 Skip 4张**
> 你的回合结束不抽牌。如被进攻时打出跳过，只能跳过一个回合。
- **帮助 Favor 4张**
> 指定一名其他玩家，他要选择一张手牌交给你。
- **洗牌 Shuffle 4张**
> 在桌下随意洗混牌堆，不得查看或有意放置任何牌。
- **5种猫牌各4张**
> _多味土豆猫，胡须猫，猫瓜西，墨西哥卷猫，彩虹呕吐猫_

> _不能单独使用，只能组合使用。_

> **组合出牌规则：**
    1. 2张相同牌——指定一名其他玩家，你随机抽取他一张手牌。
    2. 3张相同牌——指定一名其他玩家并指定一种卡牌名称，如他手里有这张卡牌则必须交给你一张。
    3. 5张不同牌——从弃牌堆里选择一张想要的卡牌。组合出牌视为出一张牌，因此可以被否决。

### 扩展包A 20张牌
- **黑洞猫 ImplodingKitten 1张**
> 牌面向下抽到时，将此牌牌面向上秘密放回牌堆任意位置。牌面向上抽到则出局。内爆猫不可被拆解或否决。

- **指向攻击 Targetedattack 3张**
> 你的行动结束不抽牌，指定任一其他玩家继续行动，且需连续进行两个回合。

- **改变未来 Alterthefuture 4张**
> 查看牌堆顶的5张牌，可以改变它们的位置，然后放回。

- **反转 Reverse 4张**
> 你的回合结束不抽牌，同时反转出牌顺序。如被进攻或强攻时打出此牌，反转出牌顺序后也只结束你一个回合，你还要继续进行一个回合。

- **野猫 FeralCat 4张**
> 可以代替任何一种猫牌使用，不能代替功能牌使用。（问号猫）

- **下翻牌 Drawfromthebottom 4张**
> 你的回合结束时不从牌堆顶抽牌，改为从牌堆底抽牌。

### 扩展包B 14张
- **爆炸猫 ExplodingKitten 1张**
> 抽到时立即展示，如打出拆解牌则将爆炸猫秘密放回牌堆任意位置，若不能打出拆解牌则出局。
- **诅咒 Swear 2张**
> 选任何玩家随机一张牌正面朝上，直到这张牌被他使用或被抽走、给走。
- **预见未来 Seethefuture 1张**
> 查看牌堆顶的5张牌后放回，不能改变它们的位置。
- **超级跳跃 Superskip 1张**
> 跳过你所有的回合。
- **裸奔猫 Streakingkitten 1张**
> 你可以秘密地保留一张炸弹猫而不爆炸。
- **垃圾收集 GabageCollection 1张**
> 每个玩家选择1张手牌，插入抽牌堆，然后切洗牌堆。
- **定位 Mark 3张**
> 标记一张卡牌，这张牌始终面朝外展示。
- **交换 Change 3张**
> 将牌堆最上面一张和最下面一张交换位置，不能看牌。
- **原子弹 CatomicBomb 1张**
>把所有爆炸猫（除黑洞猫）从抽牌堆拿出来，切洗剩下的牌堆，并把拿出来的爆炸猫面朝下放在牌堆顶部

### 扩展包C 20张牌（缺）

- **狂吠猫 BarkingKitten 2张**
> 当你有一张狂吠猫时候，可以使用。
如果此时有人有另外一只狂吠猫，对方就要交出来。然后对方需要交给你一半的牌（牌是单数就进位），然后你和手牌混合后，选出同等数量的牌还给他。（相当于融合两人手牌之后挑出好的给自己，挑出不好的给对方）
如果此时没有人有另外一只狂吠小猫，你就要把自己的这张狂吠牌亮出放在桌上，等到有人抽到另一张狂吠小猫时，你就会成为他的攻击目标。你要交给他一半的牌（单数进位），然后操作和上面一样。
如果你同时拥有两张狂吠小猫，那么你可以指定任何玩家为目标，该玩家要给你一半的牌，然后同上。
不能被`否决`。

- **立即改变未来 AltertheFutureNow 2张**
> 看牌顶3张牌，然后按任何自己想要的顺序放好，不要给别人看到，然后继续。不同的是：可以在除了“牌组正在使用”时以外（比如洗牌时），其他任何时候都可以使用，包括对手抽牌前。

- **埋葬 Bury 2张**
> 抽一张牌结束自己回合，然后这张牌放回牌组任何一个位置。如果你被使用了一张“我要了！”（下面有解释），就不能使用这张卡。如果在玩扩1的时候，抽到了“黑洞牌”，那么要保持其拿出时的位置，本来面朝上就面朝上放回，面朝下就面朝下放回。

- **攻击自己 PersonalAttack 4张**
> 攻击自己。注意不是在自己出这张牌的回合连续3次，而是你本回合正常走，下次轮到你的时候多进行2次。此时你可以打出攻击牌或超级攻击牌，让自己的两次传递给对方。

- **超级跳过 SuperSkip 1张。**
> 无需抓牌结束自己回合，不管自己此轮有多少。

- **聚餐 Potluck 2张**
> 从你开始，朝着游戏的方向，每个人选择一张卡依次放在卡组最上方。

- **权力之塔 TowerofPower 1张**
> 登上（戴上）权力之塔。接下来，拿着藏匿的卡牌，不要看他们，把他们放在你的头顶上。
如果有玩家使用对子来偷你的牌，则他们会盲目地从权力之塔随机抽取一张牌，而不是从你手牌中抽取。（这一规则不适用于恩惠牌或者三连）
在任何回合（即使是刚登上权力之塔的回合），你都可以从权力之塔中移除所有藏匿的卡牌，查看这些牌，并从中选取一张放入手中。把剩余的牌放入抽牌堆，然后洗牌。

- **我要了 IWillTakeThat 4张**
> 使用这张卡，要指定一个对手，他下次抽牌的时候，他必须给你
如果是炸弹牌给你了，你就必须出拆弹或其他方式化解或输掉。
不能对已经被使用“我要了”的玩家使用。

- **分享未来 SharetheFuture 2张**
> 私下看牌顶前3张牌，可以更换顺序，然后给下家观看这三张牌。